# ReadMe
Привет

Идея создать приложение, которое бы отслеживало беговую активность пользователя в страве
фиксировало себе время и дистанции
собирало, формировало статистику
взаимодействовало с группами
выдавало статистику: месячную, годовую, недельную


# Структура проекта
## При первом заходе в бот
- выдается пользователю сообщение, что для начала работы необходимо авторизоваться в страве
- перед авторизацией проверяем, есть ли у пользователя аккаунт в страве
- если есть, проверяем настройки, хочет ли пользователь, чтобы его данные обновляли
- спросить, хочет ли, чтобы его информацировали о новых тренировках

## Обновление тренировок
- обновление тренировок происходит по таймеру
- таймер запускаем каждый день в 11:00
- обновляем тренировки с момента последнего обновления по текущий. 
- у нас лимиты - 1000 запросов в день, 100 запросов в 15 минут
- можно попробовать сделать обновление тренировок каждые 15 минут. 
- если при обновлении получаем 429 - делаем прерывание и ждем следующих 15 минут
- обновление делаем так: получаем список пользователей отсортированных по дате последнего апдейта

## Скедулеры
### User updater
- проверяет вновь добавленных пользователей
- если видит пользователя в категории New:
  - предлагает начать следить за его тренировками
  - предлагает список чатов, где он хочет чтобы его статистика отображалась 
  - меняет категорию на Active
  - либо в зависимости от действий пользователя - может поставить категорию на Passive
  - или Deleted
  - если пользователь появился - можно обновить его тренировки
    - за год? 
    - за месяц?

### Training updater
- обновляет тренировки пользователей
- обновление происходит по таймеру
- с частотой запуска таймера определяемся отдельно. Пока не ясно. Судя по-всему по одному запросу раз в 15 минут я смогу обрабатывать только одного пользователя
- протестирую на себе, если все устроит - нужно дать запрос на увеличение лимитов

### Training checker
- проверяет тренировки на наличие новых
- отправляет сообщение пользователям, по которым найдены новые тренировки.

### Statistic updater
- их будет несколько видов:
  - недельный;
  - месячный;
  - годовой;

# Планы
- наверное нужно выводить работать на прод и наблюдать за статистикой и работой